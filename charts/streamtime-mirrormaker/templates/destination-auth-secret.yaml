{{- if eq .Values.destinationCluster.authentication.type "tls" }}
{{- if and .Values.destinationCluster.authentication.tls.certificateContent .Values.destinationCluster.authentication.tls.keyContent }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "streamtime-mirrormaker.destinationAuthSecretName" . }}
type: Opaque
stringData:
  tls.crt: {{ .Values.destinationCluster.authentication.tls.certificateContent }}
  tls.key: {{ .Values.destinationCluster.authentication.tls.keyContent }}
{{- end }}
{{- end }}

{{- if eq .Values.destinationCluster.authentication.type "scram-sha-256" }}
{{- if and .Values.destinationCluster.authentication.scramSha256.username .Values.destinationCluster.authentication.scramSha256.password }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "streamtime-mirrormaker.destinationAuthSecretName" . }}
type: Opaque
stringData:
  password: {{ .Values.destinationCluster.authentication.scramSha256.password }}
{{- end }}
{{- end }}

{{- if eq .Values.destinationCluster.authentication.type "scram-sha-512" }}
{{- if and .Values.destinationCluster.authentication.scramSha512.username .Values.destinationCluster.authentication.scramSha512.password }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "streamtime-mirrormaker.destinationAuthSecretName" . }}
type: Opaque
stringData:
  password: {{ .Values.destinationCluster.authentication.scramSha512.password }}
{{- end }}
{{- end }}

{{- if eq .Values.destinationCluster.authentication.type "plain" }}
{{- if and .Values.destinationCluster.authentication.plain.username .Values.destinationCluster.authentication.plain.password }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "streamtime-mirrormaker.destinationAuthSecretName" . }}
type: Opaque
stringData:
  password: {{ .Values.destinationCluster.authentication.plain.password }}
{{- end }}
{{- end }}

{{- if eq .Values.destinationCluster.authentication.type "oauth" }}
{{- if and .Values.destinationCluster.authentication.oauth.clientSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "streamtime-mirrormaker.destinationAuthSecretName" . }}
type: Opaque
stringData:
  clientSecret: {{ .Values.destinationCluster.authentication.oauth.clientSecret }}
{{- end }}
{{- end }}
